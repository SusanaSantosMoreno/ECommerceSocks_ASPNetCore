@using ECommerceSocks_ASPNetCore.Models
@model List<Cart> 
@{ 
    double cartPrice = 0;
}
<div id="modal_aside_right" class="modal fixed-left fade p-0" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-aside modal-dialog-scrollable" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-center w-100">Your Cart</h5>
                <button type="button" class="btn-close m-0" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-0">
                <ul class="list-group">
                    @if (Model != null) {
                        @foreach (Cart cart in Model) {
                            <li class="list-group-item py-4">
                                <div class="row">
                                    <div class="col-4">
                                        <img src="~/images/Products/Product_@(cart.Product.Product_id).jpg"
                                             class="img-fluid mx-auto d-block w-100"
                                             alt="img" />
                                    </div>
                                    <div class="col-8">
                                        <p class="p-0 m-0" style="font-weight: 600; font-size: 1.2rem">@cart.Product.Product_name</p>
                                        <p class="p-0 m-0 text-muted" style="font-weight: 600; font-size: .8rem">@cart.Product.Subcategory_name · @cart.Product.Product_color</p>
                                        <p class="p-0 m-0 text-muted" style="font-weight: 600; font-size: .8rem">Size @cart.Size.Size_UK</p>
                                        <h5 class="text-muted mt-3" style="font-weight: 600; font-size: 1.2rem">$ @cart.Product.Product_price</h5>
                                        <div class="row mt-3">
                                            <div class="col-4">
                                                <select class="form-select form-select-sm" data-product="@cart.Product.Product_id">
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                </select>
                                            </div>
                                            <a href="#" class="col-8 text-end text-muted"><i class='bx bx-x bx-lg'></i><span>Remove</span></a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            cartPrice += (cart.Product.Product_price * cart.Amount);
                        }
                    }
                </ul>
            </div>
            <div class="modal-footer" id="cartPriceSection">
                <div class="row w-100 fw-bold mb-4">
                    <span class="col-6">Subtotal</span>
                    <span class="col-6 text-end">$@cartPrice</span>
                </div>
                <div class="row w-100">
                    <button type="button" class="btn btn-outline-dark col w-100 me-3 fw-bold">Continue to Checkout</button>
                    <button type="button" class="btn btn-dark col w-100">View Cart</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/lib/js/jquery/jquery.js"></script>
<script type="text/javascript">
    $(".form-select").change(function () {
        console.log($(this).val());
        console.log($(this).data("product"));
    });
</script>